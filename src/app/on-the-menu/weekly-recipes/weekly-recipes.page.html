<ngx-loading [show]="loading"></ngx-loading>
<ion-header>
  <ion-toolbar>
    <ion-menu-button color='primary' slot="start"></ion-menu-button>
    <ion-title>
      Weekly Recipes
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="!loading">
  <ion-refresher slot="fixed" (ionRefresh)="refresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-slides>
    <ion-slide>
      <!-- <div class="home-banner" style="background-image: url(http://boxeh.net/boxeh/wp-content/uploads/2019/12/Weekly-Header-Sized.jpg);"> -->
      <div class="home-banner"
        [style.background-image]="authService.getBackground(weeklyReceipeData?.data.page_head.bg_cover)">
        <div class="banner-info">
          <h1 class="page-hero pd-lr-15 fs-20 h1-title">{{weeklyReceipeData?.data.page_head.title}}</h1>
          <div class="pd-lr-15">
            <p class="font-light sub-title">
              {{weeklyReceipeData?.data.page_head.sub_title}}</p>
          </div>
        </div>
      </div>
    </ion-slide>
  </ion-slides>

  <ion-grid class="section-bg-4 div-ptb">
    <!-- <ion-row> -->
      <ion-row style="margin-bottom: 8rem;">
      <ion-col size="12" text-center class="pt-1 pb-2">
        <ion-segment  [(ngModel)]="segment" (ionChange)="segmentChanged($event)" >
          <ion-segment-button [value]="work.id" *ngFor='let work of weeklyReceipeData?.data.section_week_recipes.weeks_to_show'>
            <ion-label>{{work.name}}</ion-label>
          </ion-segment-button>
        </ion-segment>
      </ion-col>
      <ion-col size="12" text-center class="pt-1 pb-2" style="margin-left: -5px;">
        <div [ngSwitch]="segment">
          <ng-container *ngFor='let content of weeklyReceipeData?.data.section_week_recipes.single_recipe_content'>
            <ng-container *ngSwitchCase="content.tab_pane" >
              <ion-segment  [(ngModel)]="recipeSegment" (ionChange)="recipeSegmentChanged($event)">
                <ion-row class="child-segement">
                  <ion-col size="3" text-center class="pt-1 pb-2"  *ngFor='let recipeSegment of content.tablist'>
                    <ion-segment-button [value]="recipeSegment[0].id">
                      <ion-label class="segement-label" style="font-size: 10px;">{{recipeSegment[0].title}}</ion-label>
                    </ion-segment-button>
                  </ion-col>
                </ion-row>
              </ion-segment>
              <div [ngSwitch]="recipeSegment">
                <ng-container *ngFor='let recipeContent of content.tab_content'>
                  
                  <ion-slides [options]="slideOpts" pager=true>
                    <ion-slide *ngFor='let recipes of recipeContent.recipes'>
                      <div class="single-item  align-content-stretch" *ngSwitchCase="recipeContent.id"
                      style="display: flex" tabindex="0">
                      <div class="card">
                        <div *ngFor="let item of recipes.recipes" routerLink='/weekly-recipes/recipe-blog' [queryParams]="{id: recipes.id}">
                          <img class="card-img-top" [src]="item.thumbnail">
                        </div>
                        <div class="card-body p-2">
                          <span  *ngFor="let item1 of recipes.category" routerLink='/weekly-recipes/recipe-category' [queryParams]="{id: item1.id, name:item1.name}">
                            <span class="badge badge-primary font-light small">
                                {{item1.name}} </span>
                          </span>
                          <h5 class="card-title mt-2" style="font-size: 16px; color: #91c11e; font-weight: 900;">{{recipes.title}}</h5>
                          <p class="card-text font-light font-14" [innerHTML]="recipes.content" routerLink='/weekly-recipes/recipe-blog' [queryParams]="{id: recipes.id}"></p>
                        </div>
                        <div class="card-footer" routerLink='/weekly-recipes/recipe-blog' [queryParams]="{id: recipes.id}"><span class="cook-time text-secondary font-weight-bold">{{recipes.recipe_cooking_time}}</span><span
                            class="extra font-14 font-light"></span></div>
                      </div>
                    </div>
                    </ion-slide>
                  </ion-slides>
                 
                
                </ng-container>   
                <!-- <div class="mt-3">
                  <button class="btn btn-primay btn-lg" routerLink="/weekly-recipes">Browse Our Menu</button>
                </div>    -->
              </div>
            </ng-container>
          </ng-container>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  <!-- <ion-grid class="section-bg-3 div-ptb">
    <ion-row>
      <ion-col size="12" text-center class="pt-1 pb-4">
        <button routerLink='/boxeh-plans'
          class="btn btn-primay btn-lg" style="padding: 0.5rem 1rem; font-size: 1.25rem; line-height: 1.5;">{{weeklyReceipeData?.data.section_footer.text}}</button>
      </ion-col>
    </ion-row>
  </ion-grid> -->
  <div style="position: fixed;bottom: 0;left: 0;right: 0;">
  <div class="text text-center text-secondary joinUsButton">
        <button routerLink='/boxeh-plans'
        class="btn btn-primay btn-lg stickybtn" style="padding: 0.5rem 1rem; font-size: 1.25rem; line-height: 1.5;">{{weeklyReceipeData?.data.section_footer.text}}</button>
</div>
</div>
</ion-content>